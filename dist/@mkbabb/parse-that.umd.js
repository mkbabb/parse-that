(function(i,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(i=typeof globalThis<"u"?globalThis:i||self,c(i.ParseThat={}))})(this,function(i){"use strict";class c{constructor(n,r=0,e=0,t=0){this.val=n,this.offset=r,this.col_number=e,this.line_number=t}value(n){return this.val[n??this.offset]}next(){const n=this.value();if(n!==void 0){const r=this.offset+1,e=n===`
`?this.line_number+1:this.line_number,t=n===`
`?0:this.col_number+1,s=new c(this.val,r,t,e);return[n,s]}else return[n,this]}}class o{constructor(n){this.parser=n}parse(n){return this.apply(new c(n))}apply(n){return this.parser(n)}then(n){const r=e=>{const[t,s]=this.apply(e);if(t){const[u,a]=n.apply(s);if(u)return[[t,u],a]}return[[t],e]};return new o(r)}or(n){const r=e=>{const[t,s]=this.apply(e);return t?[t,s]:n.apply(e)};return new o(r)}chain(n){const r=e=>{const[t,s]=this.apply(e);return t?n(t).apply(s):[t,s]};return new o(r)}map(n){return this.chain(r=>new o(e=>[n(r),e]))}opt(){return this.or(new o(n=>[void 0,n]))}}function f(h){function n(r){const[,e]=r.next(),[t]=h.apply(e);return[t,r]}return new o(n)}function l(h,n=0,r=1/0){function e(t){const s=[];let[u,a]=h.apply(t);for(;u&&s.length<r;)s.push(u),[u,a]=h.apply(a);return s.length>=n?[s,a]:[void 0,a]}return new o(e)}function p(...h){function n(r){const e=[];let t=r;for(const s of h){const[u,a]=s.apply(t);if(u)e.push(u),t=a;else return[void 0,t]}return[e,t]}return new o(n)}function m(h){function n(r){const[e,t]=r.next();return h.test(e)?[e,t]:[void 0,t]}return new o(n)}i.Parser=o,i.ParserState=c,i.lookAhead=f,i.many=l,i.match=m,i.sequence=p,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
